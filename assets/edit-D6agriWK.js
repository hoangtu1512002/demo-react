import{r as i,c as y,j as e}from"./index-DCpHgp3c.js";import{i as h}from"./axiosConfig-CUz5P6f_.js";import{C as N,a as t,b as x}from"./CFormInput-Dn0OHLB1.js";import{C as c,a as o,b as F,c as v}from"./CRow-BLOeaJJK.js";import{C as E}from"./CImage-B8oP5pyQ.js";import{a as S}from"./CButton-D-qS66yg.js";import"./props-CrjKqQpG.js";const B=()=>{const[a,m]=i.useState({title:"",price:"",image:null,category:"",description:""}),[j,u]=i.useState([]),{id:p}=y();i.useEffect(()=>{h.get("/products/categories").then(s=>{u(s.data)}).catch(s=>{console.error("Error:",s)})},[]),i.useEffect(()=>{h.get("/products/"+p).then(s=>{m(s.data)}).catch(s=>{console.log(s)})},[]);const r=s=>{const{name:l,value:f,files:g}=s.target;if(l==="image"&&g.length>0){const n=g[0],d=new FileReader;d.readAsDataURL(n),d.onload=()=>{m(b=>({...b,image:d.result}))}}else m(n=>({...n,[l]:f}))},C=()=>{h.put("/products/"+p,a).then(s=>{console.log(s.data)}).catch(s=>{console.error("Error:",s)})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card mt-4",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"mb-0 py-2",children:"Edit product"})}),e.jsx("div",{className:"card-body",children:e.jsxs(N,{children:[e.jsxs(c,{className:"mb-3",children:[e.jsx(t,{htmlFor:"title",className:"col-sm-2 col-form-label",children:"Product name"}),e.jsx(o,{sm:12,children:e.jsx(x,{type:"text",name:"title",value:a.title,onChange:r})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(t,{htmlFor:"price",className:"col-sm-2 col-form-label",children:"Price"}),e.jsx(o,{sm:12,children:e.jsx(x,{type:"text",name:"price",id:"price",value:a.price,onChange:r})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(t,{htmlFor:"image",className:"col-sm-2 col-form-label",children:"image"}),e.jsx(o,{sm:12,children:e.jsx(x,{type:"file",name:"image",id:"image",onChange:r})})]}),e.jsx(E,{rounded:!0,src:a.image,width:160,height:160}),e.jsxs(c,{className:"mb-3",children:[e.jsx(t,{htmlFor:"image",className:"col-sm-2 col-form-label",children:"category"}),e.jsx(o,{sm:12,children:e.jsx(F,{name:"category",value:a.category,onChange:r,children:j.map((s,l)=>e.jsx("option",{value:s,children:s},l))})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(t,{htmlFor:"image",className:"col-sm-2 col-form-label",children:"description"}),e.jsx(o,{sm:12,children:e.jsx(v,{id:"des",name:"description",style:{height:"100px"},value:a.description,onChange:r})})]}),e.jsx(S,{color:"primary",onClick:C,type:"button",children:"Submit"})]})})]})})};export{B as default};
